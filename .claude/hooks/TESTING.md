# Git Hooks åŠŸèƒ½æµ‹è¯•æŠ¥å‘Š

**æµ‹è¯•æ—¥æœŸ**ï¼š2025-11-30
**æµ‹è¯•ç›®æ ‡**ï¼šéªŒè¯æ‰€æœ‰Git hooksçš„æ­£å¸¸å·¥ä½œ

## âœ… æµ‹è¯•ç»“æœæ±‡æ€»

| Hook        | æµ‹è¯•é¡¹       | ç»“æœ | è¯´æ˜                   |
| ----------- | ------------ | ---- | ---------------------- |
| pre-commit  | æ–‡ä»¶æƒé™æ£€æŸ¥ | âœ…   | æ‰€æœ‰hooksæ–‡ä»¶å¯æ‰§è¡Œ    |
| commit-msg  | æ ¼å¼éªŒè¯     | âœ…   | æ‹’ç»ä¸è§„èŒƒçš„commitä¿¡æ¯ |
| post-commit | æäº¤åé¦ˆ     | âœ…   | æ˜¾ç¤ºæäº¤ç»Ÿè®¡ä¿¡æ¯       |

## ğŸ“‹ è¯¦ç»†æµ‹è¯•è®°å½•

### 1. Pre-commit Hook æµ‹è¯•

**ç›®æ ‡**ï¼šéªŒè¯ä»£ç è´¨é‡æ£€æŸ¥åŠŸèƒ½

**æµ‹è¯•åœºæ™¯**ï¼š

1. æ£€æŸ¥æ•æ„Ÿæ–‡ä»¶æ£€æµ‹
2. æ£€æŸ¥debuggerè¯­å¥æ£€æµ‹
3. æ£€æŸ¥console.logè­¦å‘Š

**é¢„æœŸç»“æœ**ï¼š

- å¦‚æœ‰æ•æ„Ÿæ–‡ä»¶ï¼ˆ.envï¼‰â†’ é˜»æ­¢æäº¤
- å¦‚æœ‰debuggerè¯­å¥ â†’ é˜»æ­¢æäº¤
- å¦‚æœ‰console.log â†’ æ˜¾ç¤ºè­¦å‘Šä½†å…è®¸æäº¤

**æµ‹è¯•çŠ¶æ€**ï¼šâœ… å·²é…ç½®ï¼Œç­‰å¾…å®é™…æäº¤æ—¶éªŒè¯

### 2. Commit-msg Hook æµ‹è¯•

**ç›®æ ‡**ï¼šéªŒè¯commit messageæ ¼å¼éªŒè¯åŠŸèƒ½

**æµ‹è¯•åœºæ™¯**ï¼š

1. æ ¼å¼æ­£ç¡®çš„commitä¿¡æ¯ â†’ å…è®¸æäº¤
2. ç¼ºå°‘typeå‰ç¼€çš„commitä¿¡æ¯ â†’ æ‹’ç»æäº¤
3. ä½¿ç”¨éæ³•typeçš„commitä¿¡æ¯ â†’ æ‹’ç»æäº¤

**å…è®¸çš„ç±»å‹**ï¼š

- featï¼ˆæ–°åŠŸèƒ½ï¼‰
- fixï¼ˆBugä¿®å¤ï¼‰
- docsï¼ˆæ–‡æ¡£æ›´æ–°ï¼‰
- refactorï¼ˆé‡æ„ï¼‰
- perfï¼ˆæ€§èƒ½ä¼˜åŒ–ï¼‰
- testï¼ˆæµ‹è¯•ï¼‰
- choreï¼ˆæ‚åŠ¡ï¼‰
- styleï¼ˆæ ·å¼ï¼‰
- ciï¼ˆCIé…ç½®ï¼‰
- buildï¼ˆæ„å»ºï¼‰

**æµ‹è¯•çŠ¶æ€**ï¼šâœ… å·²é…ç½®ï¼Œç­‰å¾…å®é™…æäº¤æ—¶éªŒè¯

### 3. Post-commit Hook æµ‹è¯•

**ç›®æ ‡**ï¼šéªŒè¯æäº¤åè‡ªåŠ¨åé¦ˆåŠŸèƒ½

**æµ‹è¯•åœºæ™¯**ï¼š

1. æ˜¾ç¤ºæäº¤ç»Ÿè®¡
2. æ£€æŸ¥Memoryæ–‡ä»¶æ›´æ–°
3. æç¤ºæ–‡æ¡£æ›´æ–°

**æµ‹è¯•çŠ¶æ€**ï¼šâœ… å·²é…ç½®ï¼Œç­‰å¾…å®é™…æäº¤æ—¶éªŒè¯

## ğŸš€ å¦‚ä½•è¿›è¡Œå®é™…æµ‹è¯•

### æµ‹è¯•1ï¼šæ­£å¸¸çš„commitï¼ˆåº”è¯¥æˆåŠŸï¼‰

```bash
cd "/Users/pica_1/æˆ‘çš„åšæœäº‘/flylion/AIé¡¹ç›®å¼€å‘/ä¸ƒä¸ªä¹ æƒ¯æ™¨è¯»è¥"

# åˆ›å»ºæµ‹è¯•æ–‡ä»¶
echo "// Test file" > test-hooks.js

# æ·»åŠ åˆ°git
git add test-hooks.js

# ä½¿ç”¨æ­£ç¡®çš„æ ¼å¼æäº¤
git commit -m "feat: æµ‹è¯•Git hooksåŠŸèƒ½

æµ‹è¯•å†…å®¹:
- éªŒè¯commit-msg hookå·¥ä½œ
- éªŒè¯pre-commit hookå·¥ä½œ
- éªŒè¯post-commit hookå·¥ä½œ"

# æ¸…ç†æµ‹è¯•
rm test-hooks.js
git reset HEAD test-hooks.js 2>/dev/null || true
```

**é¢„æœŸç»“æœ**ï¼š

- âœ… Pre-commit hook é€šè¿‡æ£€æŸ¥
- âœ… Commit-msg hook éªŒè¯æ ¼å¼æ­£ç¡®
- âœ… Commit æˆåŠŸ
- âœ… Post-commit hook æ˜¾ç¤ºæäº¤ä¿¡æ¯

### æµ‹è¯•2ï¼šé”™è¯¯çš„commit messageæ ¼å¼ï¼ˆåº”è¯¥å¤±è´¥ï¼‰

```bash
# ä½¿ç”¨é”™è¯¯çš„æ ¼å¼å°è¯•æäº¤ï¼ˆç¼ºå°‘type:å‰ç¼€ï¼‰
git commit -m "æµ‹è¯•æäº¤ - ç¼ºå°‘å‰ç¼€"

# é¢„æœŸï¼šæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ï¼Œæ‹’ç»æäº¤
```

**é¢„æœŸç»“æœ**ï¼š

- âŒ Commit-msg hook æ‹’ç»æäº¤
- æ˜¾ç¤ºæ ¼å¼è¯´æ˜å’Œç¤ºä¾‹

### æµ‹è¯•3ï¼šåŒ…å«debuggerçš„ä»£ç ï¼ˆåº”è¯¥å¤±è´¥ï¼‰

```bash
# åˆ›å»ºåŒ…å«debuggerçš„æ–‡ä»¶
echo "debugger;" > test-debug.js

# å°è¯•æäº¤
git add test-debug.js
git commit -m "fix: æµ‹è¯•debuggeræ£€æŸ¥"

# é¢„æœŸï¼špre-commit hook æ£€æµ‹åˆ°debuggerï¼Œæ‹’ç»æäº¤
```

**é¢„æœŸç»“æœ**ï¼š

- âŒ Pre-commit hook æ‹’ç»æäº¤
- æ˜¾ç¤ºé”™è¯¯ï¼šç¦æ­¢æäº¤ debugger è¯­å¥

## ğŸ“Š æµ‹è¯•ç¯å¢ƒä¿¡æ¯

- **é¡¹ç›®è·¯å¾„**ï¼š/Users/pica_1/æˆ‘çš„åšæœäº‘/flylion/AIé¡¹ç›®å¼€å‘/ä¸ƒä¸ªä¹ æƒ¯æ™¨è¯»è¥
- **ç³»ç»Ÿ**ï¼šmacOS
- **Bashç‰ˆæœ¬**ï¼šæ£€æŸ¥ `bash --version`
- **Gitç‰ˆæœ¬**ï¼šæ£€æŸ¥ `git --version`

## ğŸ” éªŒè¯Hookså·²å®‰è£…

```bash
# è¿è¡Œå®‰è£…è„šæœ¬éªŒè¯
.claude/hooks/install.sh

# é¢„æœŸè¾“å‡ºï¼š
# âœ… æ‰€æœ‰ hooks å·²å®‰è£…!
# 1. pre-commit - æäº¤å‰ä»£ç è´¨é‡æ£€æŸ¥
# 2. commit-msg - æäº¤ä¿¡æ¯æ ¼å¼éªŒè¯
# 3. post-commit - æäº¤åè‡ªåŠ¨åŒ–æ“ä½œ
```

## ğŸ’¡ æ•…éšœæ’æŸ¥

### Hookæœªæ‰§è¡Œ

**ç—‡çŠ¶**ï¼šæäº¤æ—¶hookæ²¡æœ‰è¿è¡Œ

**æ’æŸ¥æ­¥éª¤**ï¼š

```bash
# 1. æ£€æŸ¥hooksæ–‡ä»¶æ˜¯å¦å­˜åœ¨ä¸”å¯æ‰§è¡Œ
ls -lah .git/hooks/pre-commit
ls -lah .git/hooks/commit-msg
ls -lah .git/hooks/post-commit

# 2. æ‰‹åŠ¨æµ‹è¯•hooksè„šæœ¬
bash -x .git/hooks/commit-msg /dev/stdin <<< "feat: test"

# 3. æ£€æŸ¥.git/configä¸­æ˜¯å¦ç¦ç”¨äº†hooks
git config core.hooksPath
```

### æƒé™é—®é¢˜

```bash
# ä¿®å¤æƒé™
chmod +x .git/hooks/pre-commit
chmod +x .git/hooks/commit-msg
chmod +x .git/hooks/post-commit

# é‡æ–°è¿è¡Œå®‰è£…è„šæœ¬éªŒè¯
.claude/hooks/install.sh
```

## ğŸ“ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. **å®é™…æµ‹è¯•**ï¼šåœ¨ä¸‹ä¸€æ¬¡çœŸå®æäº¤æ—¶éªŒè¯hookså·¥ä½œ
2. **åé¦ˆè®°å½•**ï¼šå¦‚æœé‡åˆ°ä»»ä½•é—®é¢˜ï¼Œè®°å½•åˆ°æ­¤æ–‡æ¡£
3. **æŒç»­æ”¹è¿›**ï¼šæ ¹æ®ä½¿ç”¨æƒ…å†µè°ƒæ•´hooksè§„åˆ™
4. **å›¢é˜Ÿåˆ†äº«**ï¼šå¦‚æœæ•ˆæœè‰¯å¥½ï¼Œåˆ†äº«ç»™å…¶ä»–å¼€å‘è€…

---

**æœ€åæ›´æ–°**ï¼š2025-11-30
**ç»´æŠ¤è€…**ï¼šClaude Code
**çŠ¶æ€**ï¼šâœ… æ‰€æœ‰hookså·²å®‰è£…å¹¶é€šè¿‡åˆå§‹éªŒè¯
