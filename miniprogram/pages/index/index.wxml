<!--é¦–é¡µ - æœŸæ¬¡åˆ—è¡¨-->
<view class="page-index">
  <!-- é¡¶éƒ¨æ¨ªå¹… -->
  <view class="home-banner">
    <view class="banner-text-container">
      <text class="banner-text">â˜€ï¸ å¤©å¤©å¼€å¿ƒï¼</text>
      <text class="banner-subtext">åœ¨æ™¨å…‰ä¸­,é‡è§æ›´å¥½çš„è‡ªå·±</text>
    </view>
  </view>

  <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ï¼ˆæ˜¾ç¤ºç­¾åï¼‰-->
  <view class="user-card" wx:if="{{isLogin && userInfo}}">
    <view class="user-card-header">
      <text class="user-card-nickname">{{userInfo.nickname || userInfo.name || 'ç”¨æˆ·'}}</text>
    </view>
    <view class="user-signature" wx:if="{{userInfo.signature}}">
      <text class="signature-text">{{userInfo.signature}}</text>
    </view>
  </view>

  <!-- æœŸæ¬¡åˆ—è¡¨ -->
  <view class="periods-container">
    <view
      wx:for="{{periods}}"
      wx:key="_id"
      class="period-wrapper"
      catchtap="handlePeriodClick"
      data-period-id="{{item._id}}"
      data-period-name="{{item.name}}"
    >
      <course-card
        course="{{item}}"
        mode="period"
        enrolled="{{periodEnrollmentStatus[item._id]}}"
      />

      <!-- æŠ¥å/å·²æŠ¥åçŠ¶æ€æ ‡ç­¾ -->
      <view class="enrollment-label" wx:if="{{periodEnrollmentStatus[item._id]}}">
        <text class="label-text enrolled-text">âœ“ å·²æŠ¥å</text>
      </view>
    </view>

    <!-- åŠ è½½ä¸­ -->
    <view wx:if="{{loading && periods.length === 0}}" class="loading-container">
      <view class="loading-spinner"></view>
      <text class="loading-text">åŠ è½½ä¸­...</text>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view wx:if="{{!loading && periods.length === 0}}" class="empty-state">
      <text class="empty-state-icon">ğŸ“š</text>
      <text class="empty-state-text">æš‚æ— æœŸæ¬¡</text>
    </view>
  </view>
</view>
