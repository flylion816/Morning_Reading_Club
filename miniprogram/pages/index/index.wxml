<!--é¦–é¡µ - è¯¾ç¨‹åˆ—è¡¨-->
<view class="page-index">
  <!-- æµ‹è¯•æ–‡æœ¬ -->
  <view style="padding: 40rpx; background: red; color: white; font-size: 40rpx;">
    <text>å¦‚æœä½ èƒ½çœ‹åˆ°è¿™æ®µçº¢è‰²æ–‡å­—ï¼Œè¯´æ˜é¡µé¢èƒ½æ­£å¸¸æ¸²æŸ“</text>
  </view>

  <!-- é¡¶éƒ¨Banner -->
  <view class="home-banner">
    <view class="banner-text">â˜€ï¸ {{bannerText}}\nğŸŒ„ {{subBannerText}}</view>
  </view>

  <!-- ç­›é€‰æŒ‰é’® -->
  <view class="filter-tabs">
    <view
      class="filter-btn {{filterType === 'pending' ? 'active' : ''}}"
      bindtap="switchFilter"
      data-type="pending">
      å¾…æ‰“å¡
    </view>
    <view
      class="filter-btn {{filterType === 'all' ? 'active' : ''}}"
      bindtap="switchFilter"
      data-type="all">
      å…¨éƒ¨
    </view>
  </view>

  <!-- è¯¾ç¨‹åˆ—è¡¨ -->
  <view class="courses-container">
    <!-- è°ƒè¯•ä¿¡æ¯ -->
    <view style="padding: 20rpx; background: #fff3cd; margin-bottom: 20rpx;">
      <text>æ€»è¯¾ç¨‹æ•°: {{courses.length}}\n</text>
      <text>æ˜¾ç¤ºè¯¾ç¨‹æ•°: {{displayedCourses.length}}\n</text>
      <text>ç­›é€‰ç±»å‹: {{filterType}}\n</text>
      <text>åŠ è½½çŠ¶æ€: {{loading ? 'åŠ è½½ä¸­' : 'å·²å®Œæˆ'}}</text>
    </view>

    <!-- ç›´æ¥æ˜¾ç¤ºè¯¾ç¨‹ï¼Œä¸ç”¨ç»„ä»¶ -->
    <view wx:for="{{displayedCourses}}" wx:key="id" style="padding: 20rpx; background: lightblue; margin-bottom: 20rpx;">
      <text>è¯¾ç¨‹ID: {{item.id}}\n</text>
      <text>è¯¾ç¨‹æ ‡é¢˜: {{item.title}}\n</text>
      <text>å¼€å§‹æ—¶é—´: {{item.startTime}}\n</text>
      <text>ç»“æŸæ—¶é—´: {{item.endTime}}</text>
    </view>

    <course-card
      wx:for="{{displayedCourses}}"
      wx:key="id"
      course="{{item}}"
      bindtap="handleCourseClick"
      bindaction="handleCourseAction"
    />

    <!-- åŠ è½½ä¸­ -->
    <view wx:if="{{loading && displayedCourses.length === 0}}" class="loading-container">
      <view class="loading-spinner"></view>
      <text class="loading-text">åŠ è½½ä¸­...</text>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view wx:if="{{!loading && displayedCourses.length === 0}}" class="empty-state">
      <text class="empty-state-icon">ğŸ“š</text>
      <text class="empty-state-text">æš‚æ— {{filterType === 'pending' ? 'å¾…æ‰“å¡' : ''}}è¯¾ç¨‹</text>
    </view>
  </view>
</view>
