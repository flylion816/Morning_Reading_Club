<!--é¦–é¡µ - è¯¾ç¨‹åˆ—è¡¨-->
<view class="page-index">
  <!-- BanneråŒºåŸŸ -->
  <view class="home-banner">
    <view class="banner-text">{{bannerText}}</view>
    <view class="banner-sub-text">{{subBannerText}}</view>
  </view>

  <!-- è¯¾ç¨‹åˆ—è¡¨ -->
  <view class="courses-container">
    <view
      wx:for="{{courses}}"
      wx:key="id"
      class="course-item animate-slide-in-up"
      bindtap="handleCourseClick"
      data-course-id="{{item.id}}"
    >
      <!-- è¯¾ç¨‹å›¾æ ‡ -->
      <view class="course-thumb">
        <text class="course-emoji">{{item.emoji || 'ğŸ“š'}}</text>
      </view>

      <!-- è¯¾ç¨‹ä¿¡æ¯ -->
      <view class="course-info">
        <view class="course-title">{{item.title}}</view>
        <view class="course-meta">
          {{item.duration_days}}å¤© Â· ç¬¬{{item.current_period}}æœŸ
        </view>

        <!-- è¿›åº¦æ¡ -->
        <view class="course-progress" wx:if="{{item.user_course}}">
          <view class="progress-bar">
            <view
              class="progress-bar-fill"
              style="width: {{item.user_course.completion_rate}}%"
            ></view>
          </view>
          <text class="progress-text">{{item.user_course.completion_rate}}%</text>
        </view>

        <!-- æœªæŠ¥åçŠ¶æ€ -->
        <view class="course-action" wx:else>
          <text class="action-text">ç«‹å³æŠ¥å</text>
        </view>
      </view>

      <!-- çŠ¶æ€æ ‡ç­¾ -->
      <view class="course-status {{item.status}}">
        {{item.status_text}}
      </view>
    </view>

    <!-- åŠ è½½ä¸­ -->
    <view wx:if="{{loading && courses.length === 0}}" class="loading-container">
      <view class="loading-spinner"></view>
      <text class="loading-text">åŠ è½½ä¸­...</text>
    </view>

    <!-- åŠ è½½æ›´å¤š -->
    <view wx:if="{{loading && courses.length > 0}}" class="loading-more">
      <text>åŠ è½½æ›´å¤š...</text>
    </view>

    <!-- æ²¡æœ‰æ›´å¤š -->
    <view wx:if="{{!hasMore && courses.length > 0}}" class="no-more">
      <text>æ²¡æœ‰æ›´å¤šè¯¾ç¨‹äº†</text>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view wx:if="{{!loading && courses.length === 0}}" class="empty-state">
      <text class="empty-state-icon">ğŸ“š</text>
      <text class="empty-state-text">æš‚æ— è¯¾ç¨‹</text>
    </view>
  </view>
</view>
