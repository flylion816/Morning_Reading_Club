<!--é¦–é¡µ - æœŸæ¬¡åˆ—è¡¨-->
<view class="page-index">
  <!-- é¡¶éƒ¨Banner -->
  <view class="home-banner">
    <view class="banner-text">â˜€ï¸ {{bannerText}}\nğŸŒ„ {{subBannerText}}</view>
  </view>

  <!-- æœŸæ¬¡åˆ—è¡¨ -->
  <view class="periods-container">
    <view
      wx:for="{{periods}}"
      wx:key="id"
      class="period-wrapper"
    >
      <course-card
        course="{{item}}"
        mode="period"
        bindtap="handlePeriodClick"
      />

      <!-- æŠ¥åçŠ¶æ€å’ŒæŒ‰é’® -->
      <view class="period-actions">
        <!-- å·²æŠ¥åçŠ¶æ€ -->
        <view wx:if="{{periodEnrollmentStatus[item.id]}}" class="enrollment-status enrolled">
          <text class="status-badge">âœ“ å·²æŠ¥å</text>
          <text class="status-tip">ç‚¹å‡»è¿›å…¥è¯¾ç¨‹</text>
        </view>

        <!-- æœªæŠ¥åçŠ¶æ€ -->
        <view wx:else class="enrollment-status not-enrolled">
          <button
            class="enroll-btn"
            catchtap="handleEnrollClick"
            data-period-id="{{item.id}}"
            data-period-name="{{item.name}}"
          >
            ç«‹å³æŠ¥å
          </button>
        </view>
      </view>
    </view>

    <!-- åŠ è½½ä¸­ -->
    <view wx:if="{{loading && periods.length === 0}}" class="loading-container">
      <view class="loading-spinner"></view>
      <text class="loading-text">åŠ è½½ä¸­...</text>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view wx:if="{{!loading && periods.length === 0}}" class="empty-state">
      <text class="empty-state-icon">ğŸ“š</text>
      <text class="empty-state-text">æš‚æ— æœŸæ¬¡</text>
    </view>
  </view>
</view>
