<view class="page-insight-detail">
  <!-- 顶部课程标题卡片 -->
  <view class="detail-header">
    <view class="day-title">{{insight.title}}<text class="day-period">{{insight.periodName}}</text></view>
    <view class="day-subtitle">你的个性化学习反馈</view>
  </view>

  <!-- 内容区 -->
  <view class="content-section">
    <!-- 小凡看见标题 -->
    <view class="section-title">小凡看见</view>

    <!-- 正文内容 -->
    <view class="content-text">
      <rich-text nodes="{{insight.content}}" />
    </view>
  </view>

  <!-- 底部按钮 -->
  <view class="action-buttons">
    <button class="btn-back" bindtap="handleBack">返回</button>
    <!-- 生产环境：仅显示微信分享按钮 -->
    <!-- 开发环境：显示分享菜单按钮 -->
    <button wx:if="{{isDev}}" class="btn-share" bindtap="openShareMenu">分享</button>
    <button wx:else class="btn-share" open-type="share">分享给微信好友</button>
  </view>

  <!-- 开发环境：分享菜单弹窗 -->
  <view wx:if="{{isDev && showShareModal}}" class="share-modal-overlay" bindtap="closeShareModal">
    <view class="share-modal" catchtap>
      <view class="modal-header">
        <text class="modal-title">分享给</text>
      </view>
      <view class="share-options">
        <!-- 微信好友选项 -->
        <view class="share-option" bindtap="shareToWechatFriend">
          <view class="option-icon">👥</view>
          <view class="option-info">
            <text class="option-name">微信好友</text>
            <text class="option-desc">分享给微信好友</text>
          </view>
          <view class="option-arrow">›</view>
        </view>
        <!-- 虚拟好友选项（仅开发环境） -->
        <view class="share-option" bindtap="shareToVirtualFriend">
          <view class="option-icon">🤖</view>
          <view class="option-info">
            <text class="option-name">虚拟好友</text>
            <text class="option-desc">测试分享流程</text>
          </view>
          <view class="option-arrow">›</view>
        </view>
      </view>
      <view class="modal-cancel" bindtap="closeShareModal">取消</view>
    </view>
  </view>
</view>
