<!--æ‰“å¡è®°å½•é¡µé¢-->
<view class="page-checkin-records">
  <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->
  <view class="user-card">
    <view class="user-header">
      <view class="user-avatar" style="background: {{userInfo.avatarColor}}">
        <text class="avatar-text">{{userInfo.avatarText}}</text>
      </view>
      <view class="user-name">{{userInfo.userName}}</view>
    </view>

    <!-- ç»Ÿè®¡ä¿¡æ¯ -->
    <view class="stats-grid">
      <view class="stat-item">
        <view class="stat-value">{{stats.diaryCount}}</view>
        <view class="stat-label">æ—¥è®°</view>
      </view>
      <view class="stat-item">
        <view class="stat-value">{{stats.featuredCount}}</view>
        <view class="stat-label">ç²¾é€‰</view>
      </view>
      <view class="stat-item">
        <view class="stat-value">{{stats.likeCount}}</view>
        <view class="stat-label">è·èµ</view>
      </view>
      <view class="stat-item">
        <view class="stat-value">{{stats.totalCheckins}}</view>
        <view class="stat-label">ç´¯è®¡æ¬¡æ•°</view>
      </view>
      <view class="stat-item">
        <view class="stat-value">{{stats.consecutiveDays}}</view>
        <view class="stat-label">è¿ç»­å¤©æ•°</view>
      </view>
    </view>
  </view>

  <!-- æ—¥å†è§†å›¾ -->
  <view class="calendar-section">
    <view class="calendar-header">
      <view class="month-selector">
        <view class="month-btn" bindtap="handlePrevMonth">â€¹</view>
        <view class="month-text">{{monthText}}</view>
        <view class="month-btn" bindtap="handleNextMonth">â€º</view>
      </view>
    </view>

    <view class="calendar-weekdays">
      <view class="weekday" wx:for="{{weekdays}}" wx:key="*this">{{item}}</view>
    </view>

    <view class="calendar-grid">
      <view
        wx:for="{{calendarDays}}"
        wx:key="day"
        class="calendar-day {{item.isCurrentMonth ? '' : 'other-month'}} {{item.hasCheckin ? 'checked' : ''}}">
        <view class="day-number">{{item.day}}</view>
        <view wx:if="{{item.hasCheckin}}" class="day-dot"></view>
      </view>
    </view>
  </view>

  <!-- æ‰“å¡è®°å½•åˆ—è¡¨ -->
  <view class="records-section">
    <view class="section-title">æ‰“å¡è®°å½•</view>

    <view wx:if="{{checkinRecords.length > 0}}" class="records-list">
      <view
        wx:for="{{checkinRecords}}"
        wx:key="id"
        class="record-item">
        <view class="record-date">{{item.date}}</view>
        <view class="record-card">
          <view class="record-course">{{item.courseTitle}}</view>
          <view class="record-content">{{item.content}}</view>
          <view class="record-footer">
            <text class="record-time">{{item.time}}</text>
            <view class="record-stats">
              <text class="stat-icon">â¤ï¸</text>
              <text class="stat-count">{{item.likeCount}}</text>
            </view>
          </view>
        </view>
      </view>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view wx:if="{{checkinRecords.length === 0}}" class="empty-state">
      <text class="empty-state-icon">ğŸ“</text>
      <text class="empty-state-text">æš‚æ— æ‰“å¡è®°å½•</text>
    </view>
  </view>
</view>
