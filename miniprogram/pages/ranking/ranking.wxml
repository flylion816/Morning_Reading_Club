<!--æ’è¡Œæ¦œé¡µé¢-->
<view class="page-ranking">
  <!-- å½“å‰ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->
  <view class="user-card">
    <view class="user-info">
      <view class="user-avatar" style="background: {{currentUser.avatarColor}}">
        <text class="avatar-text">{{currentUser.avatarText}}</text>
      </view>
      <view class="user-details">
        <view class="user-rank">æˆ‘çš„æ’åï¼šç¬¬{{currentUser.rank}}å</view>
        <view class="user-stats">å·²æ‰“å¡ {{currentUser.checkinCount}} å¤©</view>
      </view>
    </view>
    <view class="participant-count">{{participantCount}} äººå‚ä¸</view>
  </view>

  <!-- Tabåˆ‡æ¢ -->
  <view class="tabs-container">
    <scroll-view scroll-x class="tabs-scroll">
      <view class="tabs">
        <view
          wx:for="{{tabs}}"
          wx:key="value"
          class="tab-item {{currentTab === item.value ? 'active' : ''}}"
          bindtap="handleTabChange"
          data-tab="{{item.value}}">
          <text>{{item.label}}</text>
          <view class="tab-underline" wx:if="{{currentTab === item.value}}"></view>
        </view>
      </view>
    </scroll-view>
  </view>

  <!-- æ’è¡Œæ¦œåˆ—è¡¨ -->
  <view class="ranking-list">
    <view
      wx:for="{{rankingList}}"
      wx:key="userId"
      class="ranking-item">
      <!-- æ’å -->
      <view class="rank-number {{item.rank <= 3 ? 'top-three rank-' + item.rank : ''}}">
        <text wx:if="{{item.rank <= 3}}" class="rank-icon">{{item.rank === 1 ? 'ğŸ¥‡' : item.rank === 2 ? 'ğŸ¥ˆ' : 'ğŸ¥‰'}}</text>
        <text wx:else>{{item.rank}}</text>
      </view>

      <!-- ç”¨æˆ·ä¿¡æ¯ -->
      <view class="user-avatar" style="background: {{item.avatarColor}}">
        <text class="avatar-text">{{item.avatarText}}</text>
      </view>
      <view class="user-name">{{item.userName}}</view>

      <!-- æ‰“å¡å¤©æ•° -->
      <view class="checkin-days">{{item.checkinCount}}å¤©</view>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view wx:if="{{rankingList.length === 0}}" class="empty-state">
      <text class="empty-state-icon">ğŸ†</text>
      <text class="empty-state-text">æš‚æ— æ’è¡Œæ•°æ®</text>
    </view>
  </view>

  <!-- åº•éƒ¨åˆ†äº«æŒ‰é’® -->
  <view class="fixed-bottom">
    <button class="btn-share" bindtap="handleShare">
      ç«‹å³åˆ†äº«
    </button>
  </view>
</view>
