<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ™¨è¯»è¥ - åˆ†äº«å›¾ç‰‡ç”Ÿæˆå™¨</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #f5f5f5;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            padding: 20px;
        }

        .container {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        h1 {
            text-align: center;
            color: #333;
            font-size: 28px;
            margin-bottom: 10px;
        }

        /* Tab åˆ‡æ¢åŒº */
        .tabs {
            display: flex;
            gap: 10px;
            justify-content: center;
            border-bottom: 2px solid #e0e0e0;
            flex-wrap: wrap;
        }

        .tab-btn {
            padding: 12px 24px;
            font-size: 14px;
            border: none;
            background: #f0f0f0;
            color: #666;
            cursor: pointer;
            font-weight: 600;
            border-radius: 6px 6px 0 0;
            transition: all 0.3s ease;
        }

        .tab-btn:hover {
            background: #e0e0e0;
        }

        .tab-btn.active {
            background: white;
            color: #4a90e2;
            border-bottom: 3px solid #4a90e2;
            border-radius: 6px 6px 0 0;
        }

        /* åˆ†äº«å›¾ç‰‡ç”»å¸ƒ - æ­£æ–¹å½¢å°ºå¯¸ 1080x1080 */
        #canvas {
            display: block;
            background: white;
            border-radius: 8px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            max-width: 100%;
            height: auto;
            aspect-ratio: 1 / 1;
        }

        .button-group {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        button {
            padding: 12px 24px;
            font-size: 14px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-download {
            background: linear-gradient(135deg, #4a90e2 0%, #357abd 100%);
            color: white;
        }

        .btn-download:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(74, 144, 226, 0.3);
        }

        .btn-copy {
            background: #f0f0f0;
            color: #333;
        }

        .btn-copy:hover {
            background: #e0e0e0;
        }

        .info {
            text-align: center;
            color: #666;
            font-size: 12px;
        }

        .image-desc {
            text-align: center;
            color: #999;
            font-size: 13px;
            margin-top: -10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸŒ… æ™¨è¯»è¥åˆ†äº«å›¾ç‰‡ç”Ÿæˆå™¨</h1>

        <!-- Tab åˆ‡æ¢ -->
        <div class="tabs">
            <button class="tab-btn active" onclick="switchTab('insight')">
                ğŸ“± å°å‡¡çœ‹è§ (è“è‰²ç³»)
            </button>
            <button class="tab-btn" onclick="switchTab('default')">
                ğŸŒ… é¦–é¡µ (æ—¥å‡ºä¸»é¢˜)
            </button>
        </div>

        <div class="image-desc" id="desc">
            ç”¨äº"å°å‡¡çœ‹è§"é¡µé¢çš„åˆ†äº«å›¾ï¼Œè“è‰²å†·è‰²è°ƒ
        </div>

        <canvas id="canvas" width="1080" height="1080"></canvas>

        <div class="button-group">
            <button class="btn-download" onclick="downloadImage()">ğŸ“¥ ä¸‹è½½åˆ†äº«å›¾ç‰‡</button>
            <button class="btn-copy" onclick="copyToClipboard()">ğŸ“‹ å¤åˆ¶å›¾ç‰‡</button>
        </div>

        <div class="info">
            ğŸ’¡ æç¤ºï¼šå³é”®ç‚¹å‡»å›¾ç‰‡å¯ä»¥"ä¿å­˜ä¸º..."ï¼Œæˆ–ä½¿ç”¨ä¸‹æ–¹æŒ‰é’®ä¸‹è½½
        </div>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        let currentTab = 'insight';

        function switchTab(tab) {
            currentTab = tab;

            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');

            // æ›´æ–°æè¿°
            const desc = document.getElementById('desc');
            if (tab === 'insight') {
                desc.textContent = 'ç”¨äº"å°å‡¡çœ‹è§"é¡µé¢çš„åˆ†äº«å›¾ï¼Œè“è‰²å†·è‰²è°ƒ';
            } else {
                desc.textContent = 'ç”¨äºé¦–é¡µåˆ†äº«çš„å›¾ç‰‡ï¼Œæš–è‰²è°ƒæ—¥å‡ºä¸»é¢˜';
            }

            // é‡æ–°ç»˜åˆ¶
            drawImage();
        }

        function drawShareImage() {
            // å°å‡¡çœ‹è§ - è“è‰²ç³»
            const width = canvas.width;
            const height = canvas.height;

            // èƒŒæ™¯ï¼šè“è‰²æ¸å˜
            const gradient = ctx.createLinearGradient(0, 0, width, height);
            gradient.addColorStop(0, '#5B9FE3');
            gradient.addColorStop(0.5, '#4A8FD8');
            gradient.addColorStop(1, '#3D7BC7');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, width, height);

            // å¾®å¦™ç½‘æ ¼çº¹ç†
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.03)';
            ctx.lineWidth = 1;
            for (let i = 0; i < width; i += 40) {
                ctx.beginPath();
                ctx.moveTo(i, 0);
                ctx.lineTo(i, height);
                ctx.stroke();
            }
            for (let i = 0; i < height; i += 40) {
                ctx.beginPath();
                ctx.moveTo(0, i);
                ctx.lineTo(width, i);
                ctx.stroke();
            }

            // å·¦ä¸Šè§’ï¼šæ ‡é¢˜æ–‡å­—
            ctx.font = '26px -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif';
            ctx.fillStyle = 'rgba(255, 255, 255, 0.95)';
            ctx.textAlign = 'left';
            ctx.textBaseline = 'top';
            ctx.fillText('å‡¡äººæ™¨è¯»è¥-å°å‡¡çœ‹è§', 50, 60);

            // ä¸­å¿ƒï¼šå¤§æ ‡é¢˜ "å°å‡¡çœ‹è§" - åˆ†ä¸¤è¡Œæ˜¾ç¤º
            ctx.font = 'bold 140px -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';

            const centerY = height / 2;
            const lineHeight = 160;

            // ç¬¬ä¸€è¡Œï¼šå°å‡¡ï¼ˆé˜´å½± + ä¸»æ–‡å­—ï¼‰
            ctx.fillStyle = 'rgba(0, 0, 0, 0.15)';
            ctx.fillText('å°å‡¡', width / 2 + 2, centerY - lineHeight / 2 + 3);
            ctx.fillStyle = 'rgba(255, 255, 255, 1)';
            ctx.fillText('å°å‡¡', width / 2, centerY - lineHeight / 2);

            // ç¬¬äºŒè¡Œï¼šçœ‹è§ï¼ˆé˜´å½± + ä¸»æ–‡å­—ï¼‰
            ctx.fillStyle = 'rgba(0, 0, 0, 0.15)';
            ctx.fillText('çœ‹è§', width / 2 + 2, centerY + lineHeight / 2 + 3);
            ctx.fillStyle = 'rgba(255, 255, 255, 1)';
            ctx.fillText('çœ‹è§', width / 2, centerY + lineHeight / 2);
        }

        function drawDefaultImage() {
            // é¦–é¡µåˆ†äº«å›¾ - æ¸…æ™¨æ—¥å‡ºä¸»é¢˜
            const width = canvas.width;
            const height = canvas.height;

            // èƒŒæ™¯æ¸å˜ï¼šæ·±é›è“ (#1a1a2e) â†’ æš–æ©™ (#e56c21)
            const gradient = ctx.createLinearGradient(0, 0, 0, height);
            gradient.addColorStop(0, '#1a1a2e');    // é¡¶éƒ¨ï¼šæ·±é›è“ï¼ˆå¤œæ™“ï¼‰
            gradient.addColorStop(0.5, '#9b4822');  // ä¸­éƒ¨ï¼šæ·±æ©™
            gradient.addColorStop(1, '#e56c21');    // åº•éƒ¨ï¼šæš–æ©™ï¼ˆæ™¨å…‰ï¼‰

            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, width, height);

            // è£…é¥°ï¼šåŒå¿ƒåœ†å…‰æ™•ï¼ˆæ¨¡æ‹Ÿå¤ªé˜³å…‰æ™•ï¼‰
            const cx = width / 2;
            const cy = height * 0.42;

            const circles = [
                { radius: 320, alpha: 0.08 },
                { radius: 240, alpha: 0.15 },
                { radius: 160, alpha: 0.25 },
                { radius: 90, alpha: 0.35 },
                { radius: 40, alpha: 0.5 }
            ];

            circles.forEach(circle => {
                ctx.strokeStyle = `rgba(255, 255, 255, ${circle.alpha})`;
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.arc(cx, cy, circle.radius, 0, Math.PI * 2);
                ctx.stroke();
            });

            // ä¸­å¿ƒåœ†ç‚¹
            ctx.fillStyle = 'rgba(255, 255, 255, 0.6)';
            ctx.beginPath();
            ctx.arc(cx, cy, 15, 0, Math.PI * 2);
            ctx.fill();

            // ä¸»æ ‡é¢˜ï¼šã€Œå‡¡äººæ™¨è¯»è¥ã€- æ¯å­—å•ç‹¬å®šä½
            ctx.font = 'bold 160px -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';

            const chars = ['å‡¡', 'äºº', 'æ™¨', 'è¯»', 'è¥'];
            const charW = 200;  // å­—é—´è·
            const totalW = charW * chars.length;
            const startX = (width - totalW) / 2 + charW / 2;
            const textY = height * 0.62;

            chars.forEach((char, i) => {
                const x = startX + i * charW;

                // é˜´å½±æ•ˆæœ
                ctx.fillStyle = 'rgba(0, 0, 0, 0.2)';
                ctx.fillText(char, x + 3, textY + 3);

                // ä¸»æ–‡å­—
                ctx.fillStyle = 'rgba(255, 255, 255, 1)';
                ctx.fillText(char, x, textY);
            });

            // åˆ†éš”çº¿
            ctx.strokeStyle = 'rgba(255, 255, 255, 1)';
            ctx.lineWidth = 2;
            ctx.beginPath();
            const lineY = height * 0.77;
            ctx.moveTo(width / 2 - 240, lineY);
            ctx.lineTo(width / 2 + 240, lineY);
            ctx.stroke();

            // å‰¯æ ‡é¢˜
            ctx.font = '32px -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillStyle = 'rgba(255, 240, 210, 1)';
            const subY = height * 0.85;
            ctx.fillText('åœ¨æ™¨å…‰ä¸­ï¼Œé‡è§æ›´å¥½çš„è‡ªå·±', width / 2, subY);
        }

        function drawImage() {
            if (currentTab === 'insight') {
                drawShareImage();
            } else {
                drawDefaultImage();
            }
        }

        function downloadImage() {
            drawImage();
            const link = document.createElement('a');
            link.href = canvas.toDataURL('image/png');
            const filename = currentTab === 'insight'
                ? 'å°å‡¡çœ‹è§-åˆ†äº«å›¾ç‰‡.png'
                : 'é¦–é¡µåˆ†äº«å›¾.png';
            link.download = filename;
            link.click();
        }

        function copyToClipboard() {
            drawImage();
            canvas.toBlob(blob => {
                const item = new ClipboardItem({ 'image/png': blob });
                navigator.clipboard.write([item]).then(() => {
                    alert('âœ… å›¾ç‰‡å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼Œå¯ä»¥ç›´æ¥ç²˜è´´ä½¿ç”¨');
                }).catch(err => {
                    console.error('å¤åˆ¶å¤±è´¥:', err);
                    alert('âŒ å¤åˆ¶å¤±è´¥ï¼Œè¯·ä½¿ç”¨ä¸‹è½½åŠŸèƒ½');
                });
            });
        }

        // åˆå§‹ç»˜åˆ¶
        drawImage();
    </script>
</body>
</html>
